{% extends 'store/base.html' %} {% block content %}
<div class="container py-4">
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'shop' %}">Shop</a></li>
      <li class="breadcrumb-item">
        <a href="?category={{ product.category.id }}"
          >{{ product.category.name }}</a
        >
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ product.name }}
      </li>
    </ol>
  </nav>

  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card shadow-sm">
        {% if product.image %}
        <div class="product-detail-image">
          <img
            src="{{ product.image.url }}"
            class="card-img-top"
            alt="{{ product.name }}"
          />
          {% if product.stock < 5 and product.stock > 0 %}
          <div class="product-badge">
            <span class="badge bg-warning">Low Stock</span>
          </div>
          {% elif product.stock == 0 %}
          <div class="product-badge">
            <span class="badge bg-danger">Out of Stock</span>
          </div>
          {% endif %}
        </div>
        {% endif %}
      </div>
    </div>

    <div class="col-md-6">
      <div class="product-details">
        <h1 class="mb-2">{{ product.name }}</h1>
        <div class="mb-3">
          <span class="product-category">{{ product.category.name }}</span>
        </div>
        <div class="mb-4">
          <span class="product-price h2">${{ product.price }}</span>
        </div>
        <div class="mb-4">
          <h5>Description</h5>
          <p class="text-muted">{{ product.description }}</p>
        </div>
        <div class="mb-4">
          <h5>Availability</h5>
          {% if product.stock > 0 %}
          <p class="text-success">
            <i class="bi bi-check-circle"></i> In Stock ({{ product.stock }}
            available)
          </p>
          {% else %}
          <p class="text-danger"><i class="bi bi-x-circle"></i> Out of Stock</p>
          {% endif %}
        </div>
        {% if product.stock > 0 %}
        <a
          href="{% url 'add_to_cart' product.id %}"
          class="btn btn-primary btn-lg mb-4"
        >
          <i class="bi bi-cart-plus"></i> Add to Cart
        </a>
        {% else %}
        <button class="btn btn-secondary btn-lg mb-4" disabled>
          Out of Stock
        </button>
        {% endif %}
        <div class="product-meta">
          <div class="mb-2">
            <strong>SKU:</strong>
            <span class="text-muted">PRD-{{ product.id }}</span>
          </div>
          <div>
            <strong>Category:</strong>
            <a
              href="?category={{ product.category.id }}"
              class="text-decoration-none"
            >
              {{ product.category.name }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .product-detail-image {
    position: relative;
    overflow: hidden;
    border-radius: 0.25rem;
  }
  .product-detail-image img {
    width: 100%;
    height: auto;
    transition: transform 0.3s;
  }
  .product-detail-image:hover img {
    transform: scale(1.05);
  }
  .product-badge {
    position: absolute;
    top: 10px;
    right: 10px;
  }
  .product-category {
    font-size: 0.9rem;
    color: #6c757d;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .product-price {
    color: #2c3e50;
    font-weight: 600;
  }
  .product-meta {
    padding-top: 1rem;
    border-top: 1px solid #dee2e6;
  }
  .breadcrumb a {
    text-decoration: none;
  }
</style>
{% endblock %}
